<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCA Peer Tutoring</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-left">
            <h1>CCA Peer Tutoring</h1>
            <button id="leaderboardBtn" class="leaderboard-icon" title="View Leaderboard">
                üèÜ
            </button>
        </div>
        <nav>
            <span id="headerUserName" class="user-name-header" style="display: none;"></span>
            <button id="loginBtn">Login with Google</button>
            <button id="logoutBtn" style="display: none;">Logout</button>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Login/Welcome Screen -->
        <div id="loginScreen" class="screen">
            <div class="login-container">
                <h2>Welcome to CCA Peer Tutoring</h2>
                <p>Connect with fellow students and get the help you need!</p>
                <button id="googleSignIn" class="btn-primary">Sign in with Google</button>
            </div>
        </div>

        <!-- User Setup Screen (for new users) -->
        <div id="setupScreen" class="screen" style="display: none;">
            <div class="setup-container">
                <h2>Create Your Tutor Card</h2>
                <form id="tutorSetupForm">
                    <div class="form-group">
                        <label for="tutorName">Full Name:</label>
                        <input type="text" id="tutorName" required>
                    </div>
                    <div class="form-group">
                        <label for="tutorGrade">Grade:</label>
                        <select id="tutorGrade" required>
                            <option value="">Select Grade</option>
                            <option value="9">Grade 9</option>
                            <option value="10">Grade 10</option>
                            <option value="11">Grade 11</option>
                            <option value="12">Grade 12</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isTutorCheckbox" checked>
                            I want to be a tutor (you can change this at any time)
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Subjects you can tutor:</label>
                        <div id="subjectSelection" class="subject-selection"></div>
                    </div>
                    <div class="form-group">
                        <label for="tutorBio">Short Bio:</label>
                        <textarea id="tutorBio" placeholder="Tell others about yourself and your tutoring experience"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="tutorAvailability">Availability:</label>
                        <textarea id="tutorAvailability" placeholder="e.g. Mon-Fri 3-5 PM, Weekends flexible"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="communicationMethod">Method of Communication:</label>
                        <select id="communicationMethod" required>
                            <option value="">Select Communication Method</option>
                            <option value="in-person">in-person</option>
                            <option value="online">online</option>
                            <option value="both">both</option>
                        </select>
                    </div>

                    <div class="setup-actions">
                        <button type="button" id="cancelSetupBtn" class="btn-secondary">Cancel</button>
                        <button type="submit" class="btn-primary">Save Profile</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Main App Screen -->
        <div id="appScreen" class="screen" style="display: none;">
            <!-- Navigation Tabs -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="booking">Find Tutors</button>
                <button class="tab-btn" data-tab="myrequests">My Requests</button>
                <button class="tab-btn" data-tab="myslots">My Slots</button>
                <button class="tab-btn" data-tab="events">Events </button>
                <button class="tab-btn stats-admin-only" data-tab="stats" style="display: none;">Statistics</button>
                <button class="tab-btn" data-tab="profile">My Profile</button>
            </div>

            <!-- Booking View -->
            <div id="bookingTab" class="tab-content active">
                <div class="search-container">
                    <input type="text" id="subjectSearch" placeholder="Search tutors by subject or name...">
                </div>
                <div id="tutorCards" class="tutor-grid"></div>
            </div>

            <!-- My Requests View -->
            <div id="myrequestsTab" class="tab-content">
                <h2>My Booking Requests</h2>
                <p>Current pending and declined requests that you've sent or received</p>
                <div id="myRequests" class="requests-container"></div>
            </div>

            <!-- My Slots View -->
            <div id="myslotsTab" class="tab-content">
                <h2>My Tutoring Sessions</h2>
                <p>All your confirmed and declined sessions displayed in calendar format</p>
                <div id="mySlots" class="slots-container">
                    <div id="slotsCalendar" class="calendar-view"></div>
                </div>
            </div>

            <!-- Profile View -->
            <div id="profileTab" class="tab-content">
                <h2>My Profile</h2>
                <div id="profileInfo" class="profile-container"></div>
                <button id="editProfileBtn" class="btn-secondary">Edit Profile</button>
            </div>

            <!-- Events View -->
            <div id="eventsTab" class="tab-content">
                <div class="events-header">
                    <h2>CCA Events</h2>
                    <button id="createEventBtn" class="btn-primary admin-only" style="display: none;">Create Event</button>
                </div>
                <div class="event-coordinator-info">
                    <p>üí° <strong>Want to become an event coordinator?</strong> Help organize study sessions and tutoring events! Email us at <strong>peertutoring.cca@gmail.com</strong></p>
                </div>
                <div class="events-container">
                    <div id="eventsList" class="events-list"></div>
                </div>
            </div>

            <!-- Statistics View (Admin Only) -->
            <div id="statsTab" class="tab-content">
                <h2>Tutoring Statistics Dashboard</h2>
                <div class="stats-container">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Sessions</h3>
                            <div class="stat-number" id="totalSessions">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Active Tutors</h3>
                            <div class="stat-number" id="activeTutors">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Pending Requests</h3>
                            <div class="stat-number" id="pendingRequests">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>This Week's Sessions</h3>
                            <div class="stat-number" id="weekSessions">0</div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h3>Sessions by Subject</h3>
                        <div id="subjectStats" class="subject-stats"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Request Tutoring Session</h3>
            <form id="bookingForm">
                <input type="hidden" id="selectedTutorId">
                <div class="form-group">
                    <label for="requestSubject">Subject:</label>
                    <input type="text" id="requestSubject" placeholder="Start typing a subject..." required>
                </div>
                <div class="form-group">
                    <label for="requestDate">Preferred Date:</label>
                    <input type="date" id="requestDate" required>
                </div>
                <div class="form-group">
                    <label>Preferred Start Time:</label>
                    <div class="time-picker">
                        <select id="requestTimeHour" required>
                            <option value="">Hour</option>
                            <option value="08">8 AM</option>
                            <option value="09">9 AM</option>
                            <option value="10">10 AM</option>
                            <option value="11">11 AM</option>
                            <option value="12">12 PM</option>
                            <option value="13">1 PM</option>
                            <option value="14">2 PM</option>
                            <option value="15">3 PM</option>
                            <option value="16">4 PM</option>
                            <option value="17">5 PM</option>
                            <option value="18">6 PM</option>
                            <option value="19">7 PM</option>
                            <option value="20">8 PM</option>
                        </select>
                        <select id="requestTimeMinute" required>
                            <option value="">Minute</option>
                            <option value="00">:00</option>
                            <option value="15">:15</option>
                            <option value="30">:30</option>
                            <option value="45">:45</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="requestDuration">Duration:</label>
                    <select id="requestDuration" required>
                        <option value="">Select Duration</option>
                        <option value="15">15 minutes</option>
                        <option value="30">30 minutes</option>
                        <option value="45">45 minutes</option>
                        <option value="60">1 hour</option>
                        <option value="75">1 hour 15 minutes</option>
                        <option value="90">1 hour 30 minutes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="requestLocation">Preferred Location:</label>
                    <select id="requestLocation" required>
                        <option value="">Select Location</option>
                        <option value="online">Online (Zoom/Discord/etc.)</option>
                        <option value="in-person">in-person</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="requestNotes">Additional Notes:</label>
                    <textarea id="requestNotes" placeholder="Any specific topics or questions?"></textarea>
                </div>
                <button type="submit" class="btn-primary">Send Request</button>
            </form>
        </div>
    </div>

    <!-- Event Creation Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEventModal()">&times;</span>
            <h3>Create New Event</h3>
            <form id="eventForm">
                <div class="form-group">
                    <label for="eventTitle">Event Title:</label>
                    <input type="text" id="eventTitle" placeholder="e.g. Study Session for AP Exams" required>
                </div>
                <div class="form-group">
                    <label for="eventDescription">Description:</label>
                    <textarea id="eventDescription" placeholder="Detailed description of the event..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="eventDate">Date:</label>
                    <input type="date" id="eventDate" required>
                </div>
                <div class="form-group">
                    <label>Start Time:</label>
                    <div class="time-picker">
                        <select id="eventTimeHour" required>
                            <option value="">Hour</option>
                            <option value="08">8 AM</option>
                            <option value="09">9 AM</option>
                            <option value="10">10 AM</option>
                            <option value="11">11 AM</option>
                            <option value="12">12 PM</option>
                            <option value="13">1 PM</option>
                            <option value="14">2 PM</option>
                            <option value="15">3 PM</option>
                            <option value="16">4 PM</option>
                            <option value="17">5 PM</option>
                            <option value="18">6 PM</option>
                            <option value="19">7 PM</option>
                            <option value="20">8 PM</option>
                        </select>
                        <select id="eventTimeMinute" required>
                            <option value="">Minute</option>
                            <option value="00">:00</option>
                            <option value="15">:15</option>
                            <option value="30">:30</option>
                            <option value="45">:45</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="eventLocation">Location:</label>
                    <input type="text" id="eventLocation" placeholder="e.g. Library Study Room 3" required>
                </div>
                <div class="form-group">
                    <label for="eventCapacity">Max Participants:</label>
                    <input type="number" id="eventCapacity" min="1" max="100" placeholder="20" required>
                </div>
                <button type="submit" class="btn-primary">Create Event</button>
            </form>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboardModal" class="modal">
        <div class="modal-content leaderboard-modal">
            <span class="close" onclick="closeLeaderboardModal()">&times;</span>
            <h2>üèÜ Tutoring Leaderboard</h2>
            <div class="leaderboard-top3">
                <div id="leaderboardTop3" class="top3-container"></div>
            </div>
            <div class="leaderboard-actions">
                <button id="findMyPositionBtn" class="btn-secondary">Find My Position</button>
                <button id="viewFullLeaderboardBtn" class="btn-primary">View Full Leaderboard</button>
            </div>
            <div id="fullLeaderboard" class="full-leaderboard" style="display: none;">
                <h3>All Tutors</h3>
                <div id="allTutorsLeaderboard" class="all-tutors-list"></div>
            </div>
        </div>
    </div>

    <!-- Bio Modal -->
    <div id="bioModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBioModal()">&times;</span>
            <h3 id="bioModalName"></h3>
            <div id="bioModalContent" class="bio-modal-content"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-content">
            <p><strong>peertutoring.cca@gmail.com</strong></p>
            <p><strong>Made by Aditya Shah</strong></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="actual.js"></script>
</body>
</html>
